<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Insertion des codes dans Firestore</title>
  <script type="module">
    // Import Firebase depuis CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    // ⚙️ Configuration Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDaLEfamwm6GSFGNH_lyIoKaNgsVggkVKM",
      authDomain: "drabiss.firebaseapp.com",
      projectId: "drabiss",
      storageBucket: "drabiss.firebasestorage.app",
      messagingSenderId: "218797430971",
      appId: "1:218797430971:web:102ba8065ef6f4967d319e",
      measurementId: "G-3CWXB9VPDM"
    };

    // Initialisation
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Liste des codes
    const codes = [
      "C9354","D1205","E3479","F2093","G1847","H3902","J8456","K2378","L6543","M8320","N1058","P7601",
      "Q9473","R5632","S7109","T8491","U1943","V3285","W1762","X4920","Y3014","Z6982","A4089","B2843",
      "C5710","D6834","E1946","F3092","G8275","H1638","J9450","K5829","L7103","M3467","N4081","P5194",
      "Q6870","R2301","S9018","T1437","U6584","V8932","W2709","X3705","Y1830","Z5064","A9381","B6402",
      "SD001","MN907","AD024","VB770","GH5670"
    ];

    // Fonction d’insertion
    async function insertCodes() {
      const now = new Date();
      for (let code of codes) {
        await addDoc(collection(db, "codes"), {
          code: code.trim(),
          used: false,
          createdAt: now.toISOString(),
          expiresAt: null // ⚠️ Pas encore utilisé, donc pas de date d’expiration
        });
      }
      alert("✅ Tous les codes ont été insérés dans Firestore !");
    }

    // Lancement automatique
    insertCodes();
  </script>
</head>
<body>
  <h1>Insertion en cours...</h1>
  <p>Ouvre cette page une seule fois pour insérer les codes dans Firestore.</p>
</body>
</html>
